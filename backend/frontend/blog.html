<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Space Blog - Space Alone</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preconnect" href="https://fonts.cdnfonts.com" />

        <link
            rel="icon"
            type="image/svg+xml"
            href="data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3CradialGradient id='planetGrad' cx='40%25' cy='40%25'%3E%3Cstop offset='0%25' style='stop-color:%2300f3ff;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%230088cc;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23004466;stop-opacity:1' /%3E%3C/radialGradient%3E%3ClinearGradient id='ringGrad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23b800ff;stop-opacity:0.9' /%3E%3Cstop offset='50%25' style='stop-color:%238800cc;stop-opacity:0.7' /%3E%3Cstop offset='100%25' style='stop-color:%236600aa;stop-opacity:0.5' /%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='100' cy='100' r='45' fill='url(%23planetGrad)'/%3E%3Cellipse cx='100' cy='100' rx='75' ry='20' fill='none' stroke='url(%23ringGrad)' stroke-width='8' opacity='0.8' transform='rotate(-15 100 100)'/%3E%3Ctext x='100' y='108' font-family='Arial' font-size='32' font-weight='bold' fill='%23ffffff' text-anchor='middle' opacity='0.9'%3ESA%3C/text%3E%3C/svg%3E"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Space+Grotesk:wght@400;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="./src/styles/main.css" />
        <style>
            .search-container {
                max-width: 600px;
                margin: 0 auto 40px;
                position: relative;
            }

            .search-box {
                width: 100%;
                padding: 15px 50px 15px 20px;
                background: linear-gradient(
                    135deg,
                    rgba(10, 10, 10, 0.95),
                    rgba(13, 17, 23, 0.95)
                );
                border: 2px solid var(--border-blue);
                border-radius: 50px;
                color: var(--white);
                font-size: 1rem;
                transition: all var(--transition-base);
            }

            .search-box:focus {
                outline: none;
                border-color: var(--neon-blue);
                box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
            }

            .search-box::placeholder {
                color: var(--text-gray);
            }

            .search-btn {
                position: absolute;
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
                background: var(--gradient-primary);
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all var(--transition-base);
            }

            .search-btn:hover {
                box-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
                transform: translateY(-50%) scale(1.1);
            }

            .blog-card-full {
                background: linear-gradient(
                    135deg,
                    rgba(10, 10, 10, 0.95) 0%,
                    rgba(13, 17, 23, 0.95) 100%
                );
                border: 1px solid var(--border-blue);
                border-radius: var(--radius-md);
                padding: 0;
                transition: all var(--transition-base);
                cursor: pointer;
                position: relative;
                overflow: hidden;
                display: flex;
                flex-direction: column;
            }

            .blog-card-full::before {
                content: "";
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                    circle,
                    rgba(184, 0, 255, 0.1) 0%,
                    transparent 70%
                );
                opacity: 0;
                transition: opacity var(--transition-base);
            }

            .blog-card-full:hover::before {
                opacity: 1;
            }

            .blog-card-full:hover {
                transform: translateY(-10px);
                border-color: var(--neon-blue);
                box-shadow: 0 20px 50px rgba(0, 243, 255, 0.4);
            }

            .blog-card-image {
                width: 100%;
                height: 220px;
                object-fit: cover;
                border-radius: var(--radius-md) var(--radius-md) 0 0;
            }

            .blog-card-content {
                padding: 30px;
                flex: 1;
                display: flex;
                flex-direction: column;
            }

            .blog-card-full h3 {
                color: var(--neon-blue);
                font-size: 1.5rem;
                margin-bottom: 15px;
                line-height: 1.3;
            }

            .blog-meta {
                display: flex;
                gap: 15px;
                margin-bottom: 15px;
                font-size: 0.85rem;
                color: rgba(255, 255, 255, 0.5);
                align-items: center;
            }

            .blog-meta svg {
                vertical-align: middle;
                margin-right: 5px;
            }

            .blog-excerpt {
                color: var(--text-gray);
                line-height: 1.8;
                margin-bottom: 20px;
                flex: 1;
            }

            .blog-actions {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding-top: 20px;
                border-top: 1px solid var(--border-blue);
                margin-top: auto;
            }

            .blog-read-more {
                color: var(--neon-blue);
                text-decoration: none;
                font-weight: 600;
                display: inline-flex;
                align-items: center;
                gap: 8px;
                transition: var(--transition-base);
            }

            .blog-read-more:hover {
                gap: 12px;
                color: var(--light-blue);
            }

            .blog-interaction {
                display: flex;
                gap: 20px;
                align-items: center;
            }

            .interaction-btn {
                display: flex;
                align-items: center;
                gap: 6px;
                background: transparent;
                border: none;
                color: rgba(255, 255, 255, 0.6);
                cursor: pointer;
                transition: var(--transition-base);
                font-size: 0.9rem;
                padding: 8px 12px;
                border-radius: 8px;
            }

            .interaction-btn:hover {
                color: var(--neon-blue);
                background: rgba(0, 243, 255, 0.1);
            }

            .interaction-btn.liked {
                color: #ff006e;
            }

            .interaction-btn svg {
                width: 18px;
                height: 18px;
            }

            .features-section {
                padding: 80px 0;
                background: var(--space-black);
            }

            .slider {
                width: 100%;
                height: var(--height);
                overflow: hidden;
                mask-image: linear-gradient(
                    to right,
                    transparent,
                    #000 10% 90%,
                    transparent
                );
            }

            .slider .list {
                display: flex;
                width: 100%;
                min-width: calc(var(--width) * var(--quantity));
                position: relative;
            }

            .slider .item {
                width: var(--width);
                height: var(--height);
                position: absolute;
                left: 100%;
                animation: autoRun 10s linear infinite;
                transition: filter 0.5s;
                animation-delay: calc(
                    (10s / var(--quantity)) * (var(--position) - 1) - 10s
                ) !important;
            }

            .slider:hover .item {
                animation-play-state: paused !important;
                filter: grayscale(1);
            }

            .slider .item:hover {
                filter: grayscale(0);
            }

            @keyframes autoRun {
                from {
                    left: 100%;
                }
                to {
                    left: calc(var(--width) * -1);
                }
            }

            .slider .item img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 8px;
                box-shadow: 0 4px 10px rgba(0, 243, 255, 0.3);
            }

            .blog-hero {
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                position: relative;
                padding: 60px 20px;
                margin-bottom: 50px;
                overflow: hidden;
            }

            .blog-hero::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background:
                    linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.8)),
                    url("https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=1200")
                        center/cover fixed;
                z-index: -1;
            }

            .section-divider {
                width: 100%;
                height: 2px;
                background: linear-gradient(
                    90deg,
                    transparent,
                    var(--neon-blue),
                    transparent
                );
                margin: 60px auto;
                position: relative;
                max-width: 1200px;
            }

            .section-divider::before {
                content: "";
                position: absolute;
                width: 10px;
                height: 10px;
                background: var(--neon-blue);
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%) rotate(45deg);
                box-shadow: 0 0 15px var(--neon-blue);
            }

            .blog-container {
                max-width: 1400px;
                margin: 40px auto 0;
                padding: 0 20px 100px;
            }

            .blog-grid-full {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 35px;
                margin-bottom: 60px;
            }

            .load-more-container {
                text-align: center;
                margin-top: 40px;
            }

            .btn-load-more {
                background: transparent;
                color: var(--neon-blue);
                border: 2px solid var(--neon-blue);
                padding: 15px 40px;
                border-radius: 50px;
                cursor: pointer;
                transition: all var(--transition-base);
                font-weight: 600;
                font-size: 1rem;
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            .btn-load-more:hover:not(:disabled) {
                background: var(--neon-blue);
                color: var(--space-black);
                box-shadow: 0 0 30px rgba(0, 243, 255, 0.5);
            }

            .btn-load-more:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            @media (max-width: 768px) {
                .blog-grid-full {
                    grid-template-columns: 1fr;
                    gap: 25px;
                }

                .search-container {
                    margin-bottom: 30px;
                }
            }
            .hero-stats {
                display: flex;
                justify-content: center;
                gap: 50px;
                margin-top: 30px;
                flex-wrap: wrap;
            }

            .stat-item {
                display: flex;
                align-items: center;
                gap: 15px;
                background: linear-gradient(
                    135deg,
                    rgba(0, 243, 255, 0.1),
                    rgba(184, 0, 255, 0.1)
                );
                padding: 20px 30px;
                border-radius: 15px;
                border: 1px solid rgba(0, 243, 255, 0.3);
                backdrop-filter: blur(10px);
                transition: all var(--transition-base);
            }

            .stat-item:hover {
                transform: translateY(-5px);
                border-color: var(--neon-blue);
                box-shadow: 0 10px 30px rgba(0, 243, 255, 0.3);
            }

            .stat-icon {
                color: var(--neon-blue);
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .stat-content {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }

            .stat-number {
                font-size: 2rem;
                font-weight: 700;
                color: var(--neon-blue);
                line-height: 1;
                font-family: "Space Grotesk", sans-serif;
            }

            .stat-label {
                font-size: 0.9rem;
                color: var(--text-gray);
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            @keyframes float {
                0%,
                100% {
                    transform: translateY(0) translateX(0) rotate(0deg);
                }
                25% {
                    transform: translateY(-30px) translateX(30px) rotate(90deg);
                }
                50% {
                    transform: translateY(-60px) translateX(-30px)
                        rotate(180deg);
                }
                75% {
                    transform: translateY(-30px) translateX(-60px)
                        rotate(270deg);
                }
            }

            html {
                scroll-behavior: smooth;
            }

            @media (max-width: 768px) {
                .hero-stats {
                    gap: 20px;
                    margin-top: 40px;
                }

                .stat-item {
                    padding: 15px 20px;
                    gap: 10px;
                }

                .stat-number {
                    font-size: 1.5rem;
                }

                .stat-label {
                    font-size: 0.8rem;
                }
            }
            .hero-subtitle {
                font-size: 1.25rem;
                color: var(--text-gray);
                font-weight: 300;
                margin-top: 20px;
                line-height: 1.6;
                max-width: 700px;
                margin-left: auto;
                margin-right: auto;
                opacity: 0.9;
            }

            @media (max-width: 768px) {
                .hero-subtitle {
                    font-size: 1rem;
                    margin-top: 15px;
                    padding: 0 10px;
                }
            }
        </style>
    </head>
    <body>
        <nav class="glass-header" id="main-header">
            <div class="nav-container">
                <svg
                    class="nav-logo-icon"
                    viewBox="0 0 200 200"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <defs>
                        <radialGradient id="planetGrad" cx="40%" cy="40%">
                            <stop
                                offset="0%"
                                style="stop-color: #00f3ff; stop-opacity: 1"
                            />
                            <stop
                                offset="50%"
                                style="stop-color: #0088cc; stop-opacity: 1"
                            />
                            <stop
                                offset="100%"
                                style="stop-color: #004466; stop-opacity: 1"
                            />
                        </radialGradient>
                        <linearGradient
                            id="ringGrad"
                            x1="0%"
                            y1="0%"
                            x2="100%"
                            y2="100%"
                        >
                            <stop
                                offset="0%"
                                style="stop-color: #b800ff; stop-opacity: 0.9"
                            />
                            <stop
                                offset="50%"
                                style="stop-color: #8800cc; stop-opacity: 0.7"
                            />
                            <stop
                                offset="100%"
                                style="stop-color: #6600aa; stop-opacity: 0.5"
                            />
                        </linearGradient>
                    </defs>
                    <circle cx="100" cy="100" r="45" fill="url(#planetGrad)" />
                    <ellipse
                        cx="100"
                        cy="100"
                        rx="75"
                        ry="20"
                        fill="none"
                        stroke="url(#ringGrad)"
                        stroke-width="8"
                        opacity="0.8"
                        transform="rotate(-15 100 100)"
                    />
                    <text
                        x="100"
                        y="108"
                        font-family="Arial"
                        font-size="32"
                        font-weight="bold"
                        fill="#ffffff"
                        text-anchor="middle"
                        opacity="0.9"
                    >
                        SA
                    </text>
                </svg>
                <h3 class="logo">SPACE ALONE</h3>
                <button
                    class="mobile-menu-toggle"
                    id="mobile-menu-toggle"
                    aria-label="Toggle Menu"
                >
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="nav-links" id="nav-links">
                    <a href="/#home" class="nav-link-space">Home</a>
                    <a href="/#mysteries" class="nav-link-space">Mysteries</a>
                    <a href="/#solar" class="nav-link-space">Solar System</a>
                    <a href="/#nasa" class="nav-link-space">NASA Data</a>
                    <a href="/news" class="nav-link-space">News</a>
                    <a href="/#spacex" class="nav-link-space">SpaceX</a>
                    <a href="/blog" class="nav-link-space active">Blog</a>
                </div>
            </div>
        </nav>

        <section class="blog-hero">
            <div class="hero-content">
                <h1 class="hero-title text-gradient">Space Blog</h1>
                <p class="hero-subtitle">
                    Latest discoveries and cosmic insights from across the
                    universe
                </p>

                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-icon">
                            <svg
                                width="32"
                                height="32"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                                <path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-number" id="post-count">30+</span>
                            <span class="stat-label">Articles</span>
                        </div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-icon">
                            <svg
                                width="32"
                                height="32"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path
                                    d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"
                                ></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-number">20+</span>
                            <span class="stat-label">Expert Authors</span>
                        </div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-icon">
                            <svg
                                width="32"
                                height="32"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 6v6l4 2"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-number">Daily</span>
                            <span class="stat-label">Updates</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <section class="features-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title text-gradient">Featured Posts</h2>
                    <p class="section-subtitle">
                        Latest discoveries from our blog
                    </p>
                </div>
                <div
                    class="slider"
                    id="features-slider"
                    style="--width: 200px; --height: 200px; --quantity: 9"
                >
                    <div class="list" id="slider-list"></div>
                </div>
            </div>
        </section>

        <div class="blog-container">
            <div class="search-container">
                <input
                    type="text"
                    id="search-input"
                    class="search-box"
                    placeholder="Search space articles..."
                />
                <button class="search-btn" id="search-btn">
                    <svg
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="white"
                        stroke-width="2"
                    >
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </button>
            </div>

            <div class="blog-grid-full" id="blog-grid"></div>

            <div class="load-more-container">
                <button class="btn-load-more" id="load-more-btn">
                    Load More Posts
                </button>
            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-section">
                        <h4 class="text-gradient footer-title">SPACE ALONE</h4>
                        <p class="footer-text">
                            Exploring the universe through NASA's eyes.
                            Real-time data and stunning visualizations of our
                            cosmic neighborhood.
                        </p>
                    </div>
                    <div class="footer-section">
                        <h5 class="footer-heading">Quick Links</h5>
                        <nav class="footer-links">
                            <a href="/#home">Home</a>
                            <a href="/#mysteries">Mysteries</a>
                            <a href="/#solar">Solar System</a>
                            <a href="/blog">Blog</a>
                        </nav>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>
                        &copy; 2025 Space Alone. Exploring the Universe
                        Together.
                    </p>
                </div>
            </div>
        </footer>

        <script>
            const API_BASE = window.location.origin;
            let allPosts = [];
            let displayedPosts = 0;
            const POSTS_PER_PAGE = 6;

            const fallbackImages = [
                "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=250&fit=crop",
                "https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400&h=250&fit=crop",
                "https://images.unsplash.com/photo-1543722530-d2c3201371e7?w=400&h=250&fit=crop",
                "https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?w=400&h=250&fit=crop",
                "https://images.unsplash.com/photo-1464207687429-7505649dae38?w=400&h=250&fit=crop",
                "https://images.unsplash.com/photo-1506443432602-ac2fcd6f54e0?w=400&h=250&fit=crop",
                "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=250&fit=crop",
                "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400&h=250&fit=crop",
                "https://images.unsplash.com/photo-1447433589675-4aaa569f3e05?w=400&h=250&fit=crop",
            ];

            function escapeHtml(text) {
                const div = document.createElement("div");
                div.textContent = text;
                return div.innerHTML;
            }

            function loadFeaturesSlider() {
                const sliderList = document.getElementById("slider-list");
                const slider = document.getElementById("features-slider");

                const images = allPosts
                    .filter((post) => post.image_url)
                    .slice(0, 9)
                    .map((post) => post.image_url);

                while (images.length < 9) {
                    images.push(
                        fallbackImages[images.length % fallbackImages.length],
                    );
                }

                slider.style.setProperty("--quantity", images.length);

                sliderList.innerHTML = images
                    .map(
                        (img, index) => `
                <div class="item" style="--position: ${index + 1}">
                    <img src="${img}" alt="Featured post ${index + 1}" 
                         onerror="this.src='${fallbackImages[index % fallbackImages.length]}'">
                </div>
            `,
                    )
                    .join("");
            }

            function createLoadingSpinner() {
                return `
     <div class="wifi-loader">
        <svg class="circle-outer" viewBox="0 0 86 86">
            <circle class="back" cx="43" cy="43" r="40"></circle>
            <circle class="front" cx="43" cy="43" r="40"></circle>
            <circle class="new" cx="43" cy="43" r="40"></circle>
        </svg>
        <svg class="circle-middle" viewBox="0 0 60 60">
            <circle class="back" cx="30" cy="30" r="27"></circle>
            <circle class="front" cx="30" cy="30" r="27"></circle>
        </svg>
        <svg class="circle-inner" viewBox="0 0 34 34">
            <circle class="back" cx="17" cy="17" r="14"></circle>
            <circle class="front" cx="17" cy="17" r="14"></circle>
        </svg>
        <div class="text" data-text="Loading"></div>
    </div>
            `;
            }

            async function loadBlogPosts() {
                const grid = document.getElementById("blog-grid");
                grid.innerHTML = createLoadingSpinner();

                try {
                    const response = await fetch(`${API_BASE}/api/posts`);
                    if (!response.ok) throw new Error("Failed to fetch posts");

                    const data = await response.json();
                    allPosts = Array.isArray(data) ? data : data.posts || [];

                    grid.innerHTML = "";
                    displayPosts();

                    loadFeaturesSlider();
                } catch (error) {
                    console.error("Error loading posts:", error);
                    grid.innerHTML =
                        '<p style="text-align:center;color:var(--text-gray);">Failed to load posts. Please try again later.</p>';
                }
            }

            function displayPosts() {
                const grid = document.getElementById("blog-grid");
                const loadMoreBtn = document.getElementById("load-more-btn");

                const postsToShow = allPosts.slice(
                    displayedPosts,
                    displayedPosts + POSTS_PER_PAGE,
                );

                postsToShow.forEach((post) => {
                    const card = createPostCard(post);
                    grid.appendChild(card);
                });

                displayedPosts += postsToShow.length;

                if (displayedPosts >= allPosts.length) {
                    loadMoreBtn.disabled = true;
                    loadMoreBtn.textContent = "No More Posts";
                } else {
                    loadMoreBtn.disabled = false;
                    loadMoreBtn.textContent = "Load More Posts";
                }
            }

            function createPostCard(post) {
                const card = document.createElement("div");
                card.className = "blog-card-full";

                const excerpt =
                    post.content.length > 150
                        ? post.content.substring(0, 150) + "..."
                        : post.content;
                const imageUrl =
                    post.image_url ||
                    fallbackImages[
                        Math.floor(Math.random() * fallbackImages.length)
                    ];
                const likesCount = post.likes || 0;
                const sharesCount = post.shares || 0;

                card.innerHTML = `
        <img src="${imageUrl}" alt="${escapeHtml(post.title)}" class="blog-card-image" 
             onerror="this.src='${fallbackImages[0]}'">
        <div class="blog-card-content">
            <h3>${escapeHtml(post.title)}</h3>
            <div class="blog-meta">
                <span class="blog-date">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    ${new Date(post.created_at).toLocaleDateString("en-US", {
                        year: "numeric",
                        month: "short",
                        day: "numeric",
                    })}
                </span>
                ${post.author_name ? `<span>By ${escapeHtml(post.author_name)}</span>` : ""}
            </div>
            <p class="blog-excerpt">${escapeHtml(excerpt)}</p>
            <div class="blog-actions">
                <a href="/post?id=${post.id}" class="blog-read-more" onclick="event.stopPropagation();">
                    Read Full Article
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </a>
                <div class="blog-interaction">
                    <button class="interaction-btn like-btn" data-post-id="${post.id}" onclick="event.stopPropagation();">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                        </svg>
                        <span class="like-count">${likesCount}</span>
                    </button>
                    <button class="interaction-btn share-btn" data-post-id="${post.id}" onclick="event.stopPropagation();">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="18" cy="5" r="3"></circle>
                            <circle cx="6" cy="12" r="3"></circle>
                            <circle cx="18" cy="19" r="3"></circle>
                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                        </svg>
                        <span class="share-count">${sharesCount}</span>
                    </button>
                </div>
            </div>
        </div>
    `;

                card.addEventListener("click", (e) => {
                    if (!e.target.closest("a") && !e.target.closest("button")) {
                        window.location.href = `/post?id=${post.id}`;
                    }
                });

                return card;
            }
            async function searchPosts(query) {
                if (!query.trim()) {
                    displayedPosts = 0;
                    document.getElementById("blog-grid").innerHTML = "";
                    displayPosts();
                    return;
                }

                const grid = document.getElementById("blog-grid");
                grid.innerHTML = createLoadingSpinner();

                try {
                    const response = await fetch(
                        `${API_BASE}/api/posts/search/query?q=${encodeURIComponent(query)}`,
                    );
                    if (!response.ok) throw new Error("Search failed");

                    const searchResults = await response.json();
                    allPosts = searchResults || [];
                    displayedPosts = 0;

                    grid.innerHTML = "";

                    if (allPosts.length === 0) {
                        grid.innerHTML =
                            '<p style="text-align:center;color:var(--text-gray);padding:40px;">No posts found matching your search.</p>';
                        document.getElementById("load-more-btn").disabled =
                            true;
                    } else {
                        displayPosts();
                    }
                } catch (error) {
                    console.error("Error searching posts:", error);
                    grid.innerHTML =
                        '<p style="text-align:center;color:var(--text-gray);">Search failed. Please try again.</p>';
                }
            }

            document
                .getElementById("load-more-btn")
                .addEventListener("click", () => {
                    displayPosts();
                });

            document
                .getElementById("search-btn")
                .addEventListener("click", () => {
                    const query = document.getElementById("search-input").value;
                    searchPosts(query);
                });

            document
                .getElementById("search-input")
                .addEventListener("keypress", (e) => {
                    if (e.key === "Enter") {
                        const query =
                            document.getElementById("search-input").value;
                        searchPosts(query);
                    }
                });

            const mobileToggle = document.getElementById("mobile-menu-toggle");
            const navLinks = document.getElementById("nav-links");

            if (mobileToggle) {
                mobileToggle.addEventListener("click", () => {
                    mobileToggle.classList.toggle("active");
                    navLinks.classList.toggle("active");
                });
            }

            loadBlogPosts();
        </script>
    </body>
</html>
